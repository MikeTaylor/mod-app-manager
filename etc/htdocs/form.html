<html>
  <head>
    <title>Simple forms for mod-app-store sources CRUD</title>
    <script>
      function submitPost() {
	var record = document.getElementById('postRecord').value;
        var xhr = new XMLHttpRequest();
        xhr.open('POST', '/app-store/config/sources', true);
        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
        xhr.send(record);
      }

      function submitPut() {
	var id = document.getElementById('putId').value;
	var record = document.getElementById('putRecord').value;
        var xhr = new XMLHttpRequest();
        xhr.open('PUT', '/app-store/config/sources/' + id, true);
        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
        console.log('submitting PUT');
        xhr.send(record);
      }

      function submitDelete() {
	var id = document.getElementById('deleteId').value;
        var xhr = new XMLHttpRequest();
        xhr.open('DELETE', '/app-store/config/sources/' + id, true);
        xhr.setRequestHeader('Content-Type', 'application/json; charset=UTF-8');
        console.log('submitting DELETE');
        xhr.send();
      }
    </script>
  </head>
  <body>
    <h1>Simple forms for mod-app-store sources CRUD</h1>

    <h2>List sources</h2>
    <a href="/app-store/config/sources">List</a>

    <h2>Add new source</h2>
    <form action="/app-store/config/sources" method="POST">
      Record:
      <textarea id="postRecord" rows="6" cols="40">
{
  "user": "jonno",
  "repo": "foobar",
  "token": "xyz"
}
      </textarea>
      <br />
      <button type="button" onclick="submitPost()">Add</button>
    </form>

    <h2>Update source</h2>
    <form action="/app-store/config/sources" method="POST">
      ID:
      <input id="putId" value="123" />
      <br />
      Record:
      <textarea id="putRecord" rows="6" cols="40">
{
  "user": "matthew",
  "repo": "baz",
  "token": "1a2b3c"
}
      </textarea>
      <br />
      <button type="button" onclick="submitPut()">Update</button>
    </form>

    <h2>Delete source</h2>
    <form action="/app-store/config/sources" method="POST">
      ID:
      <input id="deleteId" value="123" />
      <br />
      <button type="button" onclick="submitDelete()">Delete</button>
    </form>
  </body>
</html>

